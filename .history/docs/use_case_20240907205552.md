# Use Case
## Use case диаграмма

![file](out/use_case.svg)

## **Вариант использования:  «Оформить заказ»**

**Описание варианта использования (назначение):** В рамках оформления заказа посетитель может получить готовые блюда.

### **Предусловия:**

1. Есть хотя бы одна позиция в меню *(есть все ингредиенты для блюда)*
2. Открыт торговый день
3. Терминал исправен: 
    1. Экран должен быть без дефектов.
    2. Терминал должен корректно реагировать на действия пользователя.
    3. Должны работать все сетевые функции (обмен данными, доступ к базе данных и т.д.).

### **Постусловия:**

1. Посетитель получает номер заказа (талон)
2. В производство отправлен статус заказа

### Основной поток:

1. Посетитель активировал терминал.
2. Терминал вывел меню.
3. Посетитель выбирает категорию блюд.
4. Система отображает блюда из выбранной категории блюд.
5. Посетитель выбирает блюдо.
6. Посетитель добавляет блюдо в корзину.
7. Посетитель проверяет корзину и подтверждает заказ.
8. Терминал предлагает варианты оплаты.
9. Посетитель выбирает способ оплаты.
10. Посетитель осуществляет оплату.
11. Терминал подтверждает успешную оплату и выдает номер заказа (талон).
12. В производство отправлен статус заказа.

### Альтернативные потоки:

**1а. Меню не отображается:**

1. Посетитель не видит меню на экране терминала.
2. Терминал выводит сообщение об ошибке и предлагает перезагрузить систему.
3. После перезагрузки терминал снова выводит меню (возврат к основному потоку, шаг 2).
4. Если меню по-прежнему не отображается, терминал сообщает о необходимости обращения к персоналу.

**2а. Блюдо недоступно:**

1. Система сообщает, что выбранное блюдо недоступно (ингредиенты отсутствуют).
2. Посетитель выбирает другое блюдо из той же категории (возврат к основному потоку, шаг 5).

**3а. Корзина пуста:**

1. Посетитель пытается подтвердить заказ с пустой корзиной.
2. Терминал выводит сообщение о необходимости добавить хотя бы одно блюдо в корзину.
3. Посетитель добавляет блюдо в корзину (возврат к основному потоку, шаг 5 или 6).

**4а. Клиент не зарегистрирован в системе лояльности:**

1. Система предлагает посетителю зарегистрироваться в системе лояльности.
2. Посетитель выбирает вариант регистрации в системе лояльности.
3. Посетитель вводит необходимые данные для регистрации.
4. Система подтверждает успешную регистрацию и предлагает продолжить оформление заказа (возврат к основному потоку, шаг 7).
5. Посетитель может отказаться от регистрации и продолжить оформление заказа без регистрации (возврат к основному потоку, шаг 8).

**5а. Проблемы с оплатой:**

1. Посетитель выбирает способ оплаты, но транзакция не проходит.
2. Терминал выводит сообщение о неудачной оплате и предлагает выбрать другой способ оплаты.
3. Посетитель выбирает другой способ оплаты и повторяет попытку (возврат к основному потоку, шаг 9).
4. Если оплата не удается после нескольких попыток, терминал сообщает о необходимости обращения к персоналу.

### Исключительные потоки:

**Проблемы с отправкой заказа в производство:**

1. Терминал подтверждает успешную оплату, но возникает ошибка при отправке заказа в производство.
2. Терминал выводит сообщение о необходимости обращения к персоналу для решения проблемы с оплатой заказа.

**Прерывание процесса:**

1. Посетитель по какой-то причине прерывает процесс оформления заказа.
2. Терминал возвращается в исходное состояние, готовое для нового заказа.
3. Посетителю предлагается начать оформление заказа с начала (возврат к основному потоку, шаг 1).